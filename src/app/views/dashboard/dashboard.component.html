<c-card>
  <c-card-header>
    <svg [cIcon]="icons.cilWarning" size="xl"></svg>
    <strong> &nbsp; Importante</strong>
</c-card-header>
  <c-card-body>
    <div class="alert alert-warning" role="alert" style="text-align: justify">
      Para melhor uso do sistema garanta que o site tenha permiss√£o para mandar notifica√ß√µes e
      preencha o formul√°rio abaixo para podermos entrar em contato em caso de emerg√™ncia.
    </div>
    
    <form cForm [formGroup]="contactForm">
      <c-row>
        <c-col *ngIf="contactForm.controls['name'] as ctrl" [sm]="6">
          <label cLabel cFormCheckLabel> <strong>Nome completo:</strong></label> <br>
          <input cFormControl placeholder="Digite seu nome" formControlName="name" type="text" class="form-control"
          [valid]="
          (ctrl.invalid && ctrl.touched) ||
          (ctrl.invalid && submittedContactForm)
            ? false
            : undefined
        "/>
          <c-form-feedback>Nome √© obrigat√≥rio</c-form-feedback>
        </c-col>
        <c-col *ngIf="contactForm.controls['email'] as ctrl" [sm]="6">
          <label cLabel> <strong>Email:</strong></label><br>
          <input cFormControl placeholder="Digite seu email" formControlName="email" class="form-control"
          [valid]="
          (ctrl.invalid && ctrl.touched) ||
          (ctrl.invalid && submittedContactForm)
            ? false
            : undefined
        ">
        <c-form-feedback>Email √© obrigat√≥rio</c-form-feedback>
        </c-col>
      </c-row>
      <br>
      <c-row>
        <c-col *ngIf="contactForm.controls['address'] as ctrl" [sm]="6">
          <label cLabel > <strong>Endere√ßo:</strong></label><br>
          <textarea cFormControl placeholder="Digite seu endere√ßo" formControlName="address" class="form-control"
          [valid]="
          (ctrl.invalid && ctrl.touched) ||
          (ctrl.invalid && submittedContactForm)
            ? false
            : undefined
        "
          ></textarea>
          <c-form-feedback>Endere√ßo √© obrigat√≥rio</c-form-feedback>
        </c-col>
        <c-col *ngIf="contactForm.controls['phone'] as ctrl" [sm]="6">
          <label cLabel> <strong>Telefone:</strong></label><br>
          <input cFormControl placeholder="Digite seu telefone" formControlName="phone" class="form-control"
          [valid]="
          (ctrl.invalid && ctrl.touched) ||
          (ctrl.invalid && submittedContactForm)
            ? false
            : undefined
        ">
        <c-form-feedback>Telefone √© obrigat√≥rio</c-form-feedback>
        </c-col>
      </c-row>
    </form>
    <!-- TOAST DE FEEDBACK PARA O USU√ÅRIO SOBRE INFORMA√á√ïES INV√ÅLIDAS -->
    <br>

  <c-toast
  #toast="cToast"
  [autohide]="false"
  [visible]="flagToastFormSuccess"
  class="align-items-center bg-success"
  style="width: 100%"
  >
  <div class="d-flex">
    <c-toast-body class="text-white">
      <strong style="font-size: 16px">
        Informa√ß√µes de contato de emerg√™ncia est√£o prontas.
      </strong>
    </c-toast-body>
  </div>
  </c-toast>



  <c-toast
  #toast="cToast"
  [autohide]="false"
  [visible]="flagToastFormFailed"
  class="align-items-center bg-danger"
  style="width: 100%"
  >
  <div class="d-flex">
    <c-toast-body class="text-white">
      <strong style="font-size: 16px">
        Est√£o faltando informa√ß√µes, ou alguma informa√ß√£o est√° incorreta.
      </strong>
    </c-toast-body>
  </div>
  </c-toast>


<!-- ------------------------------------------------------------- -->
<div *ngIf="this.notificationSeen === false && this.dangerZone === true">
<br>
  <div class="alert alert-danger" role="alert" style="text-align: justify" >
        Os n√≠veis est√£o em estado emergencial e as notifica√ß√µes continuar√£o sendo enviadas com certa frequ√™ncia, para desativ√°-las
        aperte no bot√£o: <strong>Notifica√ß√£o visualizada</strong> 
      </div>
</div>  
<div *ngIf="this.emailSent === true">
  <br>
    <div class="alert alert-info" role="alert" style="text-align: justify" >
          Informamos que o email j√° foi enviado e iremos entrar em contato assim que poss√≠vel para resolver o problema.
        </div>
  </div>
  
  </c-card-body>
  <c-card-footer>
    <div class="d-grid gap-2 d-flex justify-content-end">
      <button cButton class="btn btn-success " (click)="saveData()" style="color: white;">Salvar</button>
      <button cButton *ngIf="this.notificationSeen === false && this.dangerZone === true" class="btn btn-warning " (click)="setNotificationSeen()" style="color: white;" >Notifica√ß√£o visualizada</button>
    </div>
  </c-card-footer>
</c-card>
<br>
<c-card>
  <c-card-header>
    <svg [cIcon]="icons.cilInfo" size="xl"></svg>
    <strong> &nbsp; Dados atuais</strong>
  </c-card-header>
  <c-card-body>
    
    <form cForm>
      <c-row>
        <c-col [md]="6">
          <label cLabel> <strong>N√≠vel de vaz√£o:</strong></label> <br>
          <input cFormControl sizing="lg" [value]="this.vazoes[this.vazoes.length - 1]+'%'" disabled>
        </c-col>
        <c-col [lg]="6">
          <label cLabel> <strong>N√≠vel de √°gua:</strong></label><br>
          <input  cFormControl sizing="lg" [value]="this.niveis[this.niveis.length - 1] + '%'" disabled />
        </c-col>
      </c-row>
    </form>
    <br>
    <c-accordion>
      <c-accordion-item #item0="cAccordionItem" [visible]="false">
        <ng-template cTemplateId="accordionHeaderTemplate">
          <button (click)="item0.toggleItem()" [collapsed]="!item0.visible" cAccordionButton>
            <strong>Ver gr√°ficos das √∫ltimas medi√ß√µes</strong>
          </button>
        </ng-template>
        <ng-template cTemplateId="accordionBodyTemplate">
          <div class="accordion-body">
            <c-chart type="line" [data]="data" [options]="chartOptions"></c-chart>
          </div>
        </ng-template>
      </c-accordion-item>
    </c-accordion>     
  </c-card-body>
</c-card>



<c-modal backdrop="static" [visible]="modalNotificationSeen">
	<c-modal-header>
		<h3 cModalTitle>Entendido! ü´°</h3>
	</c-modal-header>
  <c-modal-body>
    <div class="alert alert-success" role="alert" style="font-size: 18px">
      Notifica√ß√£o foi vista, ent√£o iremos parar com o ciclo de envios de notifica√ß√µes!
    </div>
  </c-modal-body>
</c-modal>

